<?xml version="1.0" encoding="ISO-8859-1"?>

<project name="sistra.listar" default="main" basedir=".">

    <property file="${basedir}/build.properties"/>

    <property name="modul" value="listar"/>

    <property name="home.dir" location="${basedir}/../.."/>
    <property file="${home.dir}/config.properties"/>
	<property file="${home.dir}/../../config.properties"/>
	
    <property name="output.dir" location="${home.dir}/output"/>
    <property name="modul.output.dir" location="${output.dir}/${modul}"/>

    <property name="etc.dir" location="${basedir}/etc"/>
	
    <property name="web.htdocs" location="${basedir}/htdocs"/>
    <property name="web.product" location="${output.dir}/moduls"/>
	
	<property name="web.gen.etc" location="${modul.output.dir}/gen-etc"/>
	
    <!-- Crea tots els directoris de treball necessaris -->
    <target name="prepare">
        <mkdir dir="${web.product}"/>
    	<mkdir dir="${web.gen.etc}"/>
    	<copy todir="${web.gen.etc}"><fileset dir="${etc.dir}"/></copy>
    </target>

    <target name="web.war" depends="prepare">
        <delete file="${web.product}/5-${prj.name}-${modul}.war" quiet="yes"/>
        <war warfile="${web.product}/5-${prj.name}-${modul}.war"
            basedir="${web.htdocs}" webxml="${etc.dir}/web.xml">
            <manifest>
                <attribute name="Created-By" value="${indra}"/>
            </manifest>
        	<webinf dir="${web.gen.etc}" includes="*.xml" excludes="web.xml"/>
        </war>
    </target>


   <target name="main" depends="web.war" description="Construeye el war"/>

</project>
